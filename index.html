<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BCA Chatbot</title>
    <link rel="stylesheet" href="rohit.css">
</head>
<body>
    <div class="chatbox-container">
        <div class="chatbox">
            <h1>Welcome to the BCA Department</h1>
            <div id="chat-container">
                <div id="chat-log"></div>
                <div class="input-container">
                    <input 
                        type="text" 
                        id="user-input" 
                        placeholder="Ask me something..." 
                        onkeypress="handleKeyPress(event)"
                    />
                    <button onclick="sendMessage()">Send</button>
                </div>
            </div>
        </div>
        <div id="switch-button-container">
            <button id="switch-button" onclick="switchChat()">Switch for Sem-1</button>
        </div>
    </div>

    <script>
        let currentChat = "default"; // "default" or "sem-1"

        function speakText(text) {
            const synth = window.speechSynthesis;
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = "en-US";
            utterance.rate = 1;
            utterance.pitch = 1;
            synth.speak(utterance);
        }

        const defaultResponses = {
            "hello": "Hi there! How can I assist you?",
            "how are you": "I'm just a chatbot, but I'm functioning perfectly! How about you?",
            "name": "I am Dhooni Baba, your friendly department chatbot.",
            "bye": "Goodbye! Have a great day!",
            "bca": "BCA stands for Bachelor of Computer Applications.",
            "hod": "Dr. P.K. Rai is the Head of the Department.",
            "help": "Sure! Let me know how I can assist you.",
            "website": "Yes, click on this link: <a href='https://apsurewa.ac.in/en/departments/computer-applications' target='_blank'>BCA Department Website</a>.",
            "admission": "For admission details, visit <a href='https://apsurewa.ac.in/en/admissions' target='_blank'>Admission Page</a>.",
            "location": "APSU University Campus, Rewa 486001.",
	    "working hour": "11 am-4 pm.",
	    "holidays": "Saturday, sunday and national holidays.",
            "courses":"MCA AND BCA ,For courses details, visit <a href='https://apsurewa.ac.in/en/courses-ca' target='_blank'>courses</a>.",
            "programmes":"For program details, visit <a href='https://apsurewa.ac.in/en/courses-ca' target='_blank'>programms</a>.",
            "faculty":"For faculty details, visit <a href='https://apsurewa.ac.in/en/faculty-members-ca' target='_blank'>faculty</a>.",
	    "Syllabus":"For syllabus details, visit <a href='https://apsurewa.ac.in/en/syllabus-mca' target='_blank'>syllabus</a>.",
            "Admission": "contact bca department.",
	    "contact": "Mobile (+91) 9074477930.",
	    "fees structure":"For fees details, visit <a href='https://apsurewa.ac.in/files/684/fees_revision_structure.pdf' target='_blank'>fees structure</a>.",
	    "facilities":" High-speed internet connectivity, modern computers and hardware, software and licenses, networking infrastructure, dedicated computer labs, backup and storage 		solutions, printers and scanners, technical support and maintenance, smart classrooms and projectors, cybersecurity measures.For more details, visit <a 				https://apsurewa.ac.in/en/class-rooms-seminar-halls-coap' target='_blank'>facilities</a>.",
		
        };

        const sem1Responses = {
            "subjects": "Subjects for Semester 1 include Mathematics, Programming, and Digital Logic.",
            "schedule": "Semester 1 classes start at 9:00 AM and end at 3:00 PM.",
            "assignments": "All assignments for Sem-1 are due by the end of this month.",
            "resources": "Sem-1 study materials are available at <a href='https://apsurewa.ac.in/en/resources-sem1' target='_blank'>Sem-1 Resources</a>."
        };

        window.onload = function () {
            const predefinedMessages = [
                "I'm Dhooni Baba, the chatbot. Speed 1 terahertz, memory 1 zettabyte.",
                "Chatbot for BCA Department."
            ];

            const chatLog = document.getElementById("chat-log");

            predefinedMessages.forEach((message, index) => {
                setTimeout(() => {
                    chatLog.innerHTML += 
                        `<div class="message chatbot-msg">
                            <img src="https://github.com/Naveennoobda/BCA-chatbot/blob/main/bot.png?raw=true" alt="Chatbot Icon" class="icon">
                            <span>${message}</span>
                        </div>`;
                    speakText(message);
                    chatLog.scrollTop = chatLog.scrollHeight;
                }, index * 3000);
            });
        };

        function sendMessage() {
            const userInput = document.getElementById("user-input").value.trim();
            const chatLog = document.getElementById("chat-log");

            if (userInput) {
                chatLog.innerHTML += 
                    `<div class="message user-msg">
                        <img src="https://github.com/Naveennoobda/BCA-chatbot/blob/main/user.png?raw=true" alt="User Icon" class="icon">
                        <span>${userInput}</span>
                    </div>`;

                setTimeout(() => {
                    let response = "I'm sorry, I don't understand that.";

                    const activeResponses = currentChat === "default" ? defaultResponses : sem1Responses;

                    Object.keys(activeResponses).forEach((keyword) => {
                        const regex = new RegExp(`\\b${keyword}\\b`, 'i'); // Properly escaped \b
                        if (regex.test(userInput)) {
                            response = activeResponses[keyword];
                        }
                    });

                    chatLog.innerHTML += 
                        `<div class="message chatbot-msg">
                            <img src="https://github.com/Naveennoobda/BCA-chatbot/blob/main/bot.png?raw=true" alt="Chatbot Icon" class="icon">
                            <span>${response}</span>
                        </div>`;
                    
                    speakText(response.replace(/<[^>]+>/g, ""));
                    chatLog.scrollTop = chatLog.scrollHeight;
                }, 1000);

                document.getElementById("user-input").value = '';
            }
        }

        function handleKeyPress(event) {
            if (event.key === "Enter") {
                sendMessage();
            }
        }

        function switchChat() {
            const switchButton = document.getElementById("switch-button");
            if (currentChat === "default") {
                currentChat = "sem-1";
                switchButton.textContent = "Switch to Default Chatbot";
                document.getElementById("chat-log").innerHTML = 
                    `<div class="message chatbot-msg">
                        <span>You are now chatting with the Semester 1 Chatbot.</span>
                    </div>`;
            } else {
                currentChat = "default";
                switchButton.textContent = "Switch for Sem-1";
                document.getElementById("chat-log").innerHTML = 
                    `<div class="message chatbot-msg">
                        <span>You are now chatting with the Default Chatbot.</span>
                    </div>`;
            }
        }
    </script>
</body>
</html>
