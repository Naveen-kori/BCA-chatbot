<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BCA Chatbot</title>
    <link rel="stylesheet" href="rohit.css">
</head>
<body>
    <div class="chatbox">
        <h1>Welcome to the BCA Department</h1>
        <div id="chat-container">
            <button id="switch-button" onclick="switchChat()">Switch for Sem-1</button>
            <div id="chat-log"></div>
            <div class="input-container">
                <input 
                    type="text" 
                    id="user-input" 
                    placeholder="Ask me something..." 
                    onkeypress="handleKeyPress(event)"
                />
                <button onclick="sendMessage()">Send</button>
            </div>
        </div>
    </div>

    <script>
        // Default context variable
        let currentChat = "default"; // "default" or "sem-1"

        // Function to make the chatbot speak
        function speakText(text) {
            const synth = window.speechSynthesis;
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = "en-US";
            utterance.rate = 1;
            utterance.pitch = 1;
            synth.speak(utterance);
        }

        // Predefined responses for the default chatbot
        const defaultResponses = {
            "hello": "Hi there! How can I assist you?",
            "how are you": "I'm just a chatbot, but I'm functioning perfectly! How about you?",
            "your name": "I am Dhooni Baba, your friendly department chatbot.",
            "bye": "Goodbye! Have a great day!",
            "bca": "BCA stands for Bachelor of Computer Applications. It's a great field to explore!",
            "department": "The BCA department provides excellent opportunities in computer science and IT.",
            "hod": "Dr. P.K. Rai is the Head of the Department.",
            "help": "Sure! Let me know how I can assist you.",
            "website": "Yes, click on this link: <a href='https://apsurewa.ac.in/en/departments/computer-applications' target='_blank'>BCA Department Website</a>.",
            "admission": "For admission details, visit <a href='https://apsurewa.ac.in/en/admissions' target='_blank'>Admission Page</a>.",
            "exam schedule": "Check the latest exam schedule here: <a href='https://apsurewa.ac.in/en/exam-schedule' target='_blank'>Exam Schedule</a>.",
            "resources": "Find study materials and resources here: <a href='https://apsurewa.ac.in/en/resources' target='_blank'>Resources Page</a>.",
            "working hour": "11 am to 4 pm",
            "holiday": "Saturday, Sunday, and for national holidays",
            "location": "APSU University Campus, Rewa 486001.",
            "courses": "MCA and BCA",
            "duration of courses": "MCA - 2 years & BCA - 3 years.",
            "yearly,semester": "Semester-wise: MCA - 4 semesters, BCA - 6 semesters.",
            "labs": "Visit this site: <a href='https://apsurewa.ac.in/en/class-rooms-seminar-halls-coap' target='_blank'>Labs</a>.",
            "classes": "Visit this site: <a href='https://apsurewa.ac.in/en/class-rooms-seminar-halls-coap' target='_blank'>Classes</a>.",
            "condition": "Based on student reviews, the facilities are good in all aspects.",
            "syllabus": "Visit this site: <a href='https://apsurewa.ac.in/en/syllabus-mca' target='_blank'>Syllabus</a>.",
            "faculty": "Visit this site: <a href='https://apsurewa.ac.in/en/faculty-members-ca' target='_blank'>Faculty</a>.",
            "fees": "Visit this site: <a href='https://apsurewa.ac.in/files/684/fees_revision_structure.pdf' target='_blank'>Fees</a>."
        };

        // Predefined responses for the Sem-1 chatbot
        const sem1Responses = {
            "subjects": "Subjects for Semester 1 include Mathematics, Programming, and Digital Logic.",
            "schedule": "Semester 1 classes start at 9:00 AM and end at 3:00 PM.",
            "assignments": "All assignments for Sem-1 are due by the end of this month.",
            "resources": "Sem-1 study materials are available at <a href='https://apsurewa.ac.in/en/resources-sem1' target='_blank'>Sem-1 Resources</a>."
        };

        // Display predefined chatbot messages on page load
        window.onload = function () {
            const predefinedMessages = [
                "I'm Dhooni Baba, the chatbot. Speed 1 terahertz, memory 1 zettabyte.",
                "Chatbot for BCA Department."
            ];

            const chatLog = document.getElementById("chat-log");

            predefinedMessages.forEach((message, index) => {
                setTimeout(() => {
                    chatLog.innerHTML += 
                        `<div class="message chatbot-msg">
                            <img src="https://github.com/Naveennoobda/BCA-chatbot/blob/main/bot.png?raw=true" alt="Chatbot Icon" class="icon">
                            <span>${message}</span>
                        </div>`;
                    speakText(message);
                    chatLog.scrollTop = chatLog.scrollHeight;
                }, index * 3000);
            });
        };

        // Function to send the user message and provide a chatbot response
        function sendMessage() {
            const userInput = document.getElementById("user-input").value.trim();
            const chatLog = document.getElementById("chat-log");

            if (userInput) {
                // Add the user's message to the chat log
                chatLog.innerHTML += 
                    `<div class="message user-msg">
                        <img src="https://github.com/Naveennoobda/BCA-chatbot/blob/main/user.png?raw=true" alt="User Icon" class="icon">
                        <span>${userInput}</span>
                    </div>`;

                // Process chatbot response
                setTimeout(() => {
                    let response = "I'm sorry, I don't understand that.";

                    // Use the appropriate responses based on the current chat context
                    const activeResponses = currentChat === "default" ? defaultResponses : sem1Responses;

                    // Match user input with keyword-based responses
                    Object.keys(activeResponses).forEach((keyword) => {
                        const regex = new RegExp(`\\b${keyword}\\b`, 'i'); // Matches whole words, case-insensitive
                        if (regex.test(userInput)) {
                            response = activeResponses[keyword];
                        }
                    });

                    // Add chatbot's response to the chat log
                    chatLog.innerHTML += 
                        `<div class="message chatbot-msg">
                            <img src="https://github.com/Naveennoobda/BCA-chatbot/blob/main/bot.png?raw=true" alt="Chatbot Icon" class="icon">
                            <span>${response}</span>
                        </div>`;
                    
                    speakText(response.replace(/<[^>]+>/g, "")); // Speak without HTML tags
                    chatLog.scrollTop = chatLog.scrollHeight;
                }, 1000);

                // Clear the input field
                document.getElementById("user-input").value = '';
            }
        }

        // Function to handle the Enter key press
        function handleKeyPress(event) {
            if (event.key === "Enter") {
                sendMessage();
            }
        }

        // Function to switch between default and Sem-1 chatbot
        function switchChat() {
            const switchButton = document.getElementById("switch-button");
            if (currentChat === "default") {
                currentChat = "sem-1";
                switchButton.textContent = "Switch to Default Chatbot";
                document.getElementById("chat-log").innerHTML = 
                    `<div class="message chatbot-msg">
                        <span>You are now chatting with the Semester 1 Chatbot.</span>
                    </div>`;
            } else {
                currentChat = "default";
                switchButton.textContent = "Switch for Sem-1";
                document.getElementById("chat-log").innerHTML = 
                    `<div class="message chatbot-msg">
                        <span>You are now chatting with the Default Chatbot.</span>
                    </div>`;
            }
        }
    </script>
</body>
</html>
